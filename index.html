<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shreevari Services – Client Feedback Form</title>
  <style>
    :root{
      --bg:#f4f6fb;
      --card:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --brand:#2563eb;
      --brand-600:#1d4ed8;
      --brand-50:#ebf2ff;
      --line:#e5e7eb;
      --ring:rgba(37,99,235,.25);
      --shadow:0 6px 24px rgba(0,0,0,.06), 0 2px 8px rgba(0,0,0,.05);
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial;}
    .wrap{max-width:960px;margin:24px auto;padding:0 16px 120px}
    .header-card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:24px 26px;display:flex;align-items:center;gap:16px}
    .doc-icon{width:44px;height:44px;border-radius:12px;background:var(--brand-50);display:grid;place-items:center;flex:0 0 auto}
    .doc-icon svg{width:22px;height:22px;fill:var(--brand)}
    .title{font-size:28px;font-weight:700}
    .subtitle{color:var(--muted);margin-top:4px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:26px;margin-top:18px}
    .qhead{display:flex;align-items:flex-start;gap:14px;margin-bottom:14px}
    .qnum{width:36px;height:36px;border-radius:10px;background:var(--brand-50);color:#111827;display:grid;place-items:center;font-weight:700}
    .qlabel{font-size:20px;font-weight:700}
    .req::after{content:" *";color:#ef4444;font-weight:700}
    .options{margin-left:50px;display:grid;gap:10px}
    input[type="radio"], input[type="checkbox"]{accent-color:var(--brand)}
    .text-input{margin-left:50px;width:100%;max-width:740px}
    .text-input input[type="number"], .text-input input[type="range"]{width:100%}
    input[type="range"]{appearance:none;height:6px;background:var(--line);border-radius:6px;outline:none}
    input[type="range"]::-webkit-slider-thumb{appearance:none;width:20px;height:20px;border-radius:50%;background:var(--brand);cursor:pointer;box-shadow:0 0 0 2px #fff,0 0 0 4px var(--ring)}
    input[type="range"]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:var(--brand);cursor:pointer;border:none;box-shadow:0 0 0 2px #fff,0 0 0 4px var(--ring)}
    .range-value{text-align:center;margin-top:8px;font-weight:600;color:var(--brand)}
    .stars{margin-left:50px;display:flex;gap:8px;align-items:center}
    .star{cursor:pointer;display:inline-grid;place-items:center;width:28px;height:28px}
    .star svg{width:24px;height:24px;transition:transform .08s ease}
    .star.filled svg{fill:gold}
    .star:hover svg{transform:scale(1.08)}
    .sr{position:absolute;left:-9999px}
    .submit-bar{position:fixed;left:0;right:0;bottom:0;background:var(--card);border-top:1px solid var(--line);box-shadow:0 -6px 24px rgba(0,0,0,.05);}
    .submit-inner{max-width:960px;margin:0 auto;padding:16px}
    .btn{appearance:none;border:0;border-radius:12px;background:var(--brand);color:#fff;font-weight:700;padding:14px 22px;min-width:150px;cursor:pointer;box-shadow:0 6px 16px rgba(37,99,235,.25)}
    .btn:hover{background:var(--brand-600)}
    .btn[disabled]{opacity:.6;cursor:not-allowed;box-shadow:none}
    @media (max-width:640px){.qlabel{font-size:18px}.options,.text-input,.stars{margin-left:0}.qhead{gap:10px}.qnum{width:32px;height:32px}}
    .toast{position:fixed;right:16px;bottom:80px;background:#111827;color:#fff;padding:12px 16px;border-radius:10px;box-shadow:var(--shadow);opacity:0;transform:translateY(10px);transition:all .2s ease}
    .toast.show{opacity:1;transform:translateY(0)}
  </style>
</head>
<body>
  <form id="assessmentForm" class="wrap" autocomplete="on" novalidate>
    <section class="header-card">
      <div class="doc-icon"><svg viewBox="0 0 24 24"><path d="M7 2h7l6 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm7 1.5V9h5.5"/></svg></div>
      <div>
        <div class="title">Shreevari Services</div>
        <div class="subtitle">Client Feedback Form</div>
      </div>
    </section>
    <section class="card"><div class="qhead"><div class="qnum">1</div><div class="qlabel req">Personal Attack</div></div><div class="options"><label><input type="radio" name="personalAttack" value="Yes" required> Yes</label><label><input type="radio" name="personalAttack" value="No"> No</label></div></section>
    <section class="card"><div class="qhead"><div class="qnum">2</div><div class="qlabel req">Demeaning children and wife</div></div><div class="options"><label><input type="radio" name="demeaningFamily" value="Yes" required> Yes</label><label><input type="radio" name="demeaningFamily" value="No"> No</label></div></section>
    <section class="card"><div class="qhead"><div class="qnum">3</div><div class="qlabel req">Sexual Abusive Words</div></div><div class="options"><label><input type="radio" name="abusiveWords" value="Yes" required> Yes</label><label><input type="radio" name="abusiveWords" value="No"> No</label></div></section>
    <section class="card">
      <div class="qhead"><div class="qnum">4</div><div class="qlabel req">Number of filthy words (Scale: 1 to 10000)</div></div>
      <div class="text-input">
        <input type="range" name="cryScale" id="cryRange" min="1" max="10000" value="1" required>
        <div id="cryValue" class="range-value">1</div>
      </div>
    </section>
    <section class="card"><div class="qhead"><div class="qnum">5</div><div class="qlabel req">Intimidation of repetition?</div></div><div class="options"><label><input type="radio" name="satisfied" value="Yes" required> Yes</label><label><input type="radio" name="satisfied" value="No"> No</label></div></section>
        <section class="card"><div class="qhead"><div class="qnum">6</div><div class="qlabel req">Provocation of suicidal thoughts?</div></div><div class="options"><label><input type="radio" name="satisfied" value="Yes" required> Yes</label><label><input type="radio" name="satisfied" value="No"> No</label></div></section>
    <section class="card"><div class="qhead"><div class="qnum">7</div><div class="qlabel req">Client Satisfied</div></div><div class="options"><label><input type="radio" name="satisfied" value="Yes" required> Yes</label><label><input type="radio" name="satisfied" value="No"> No</label></div></section>

    <section class="card"><div class="qhead"><div class="qnum">8</div><div class="qlabel req">Satisfaction Rating</div></div><div class="stars" id="starGroup"><input class="sr" type="radio" name="stars" id="stars-1" value="1" required><input class="sr" type="radio" name="stars" id="stars-2" value="2"><input class="sr" type="radio" name="stars" id="stars-3" value="3"><input class="sr" type="radio" name="stars" id="stars-4" value="4"><input class="sr" type="radio" name="stars" id="stars-5" value="5"><button type="button" class="star" data-val="1">☆</button><button type="button" class="star" data-val="2">☆</button><button type="button" class="star" data-val="3">☆</button><button type="button" class="star" data-val="4">☆</button><button type="button" class="star" data-val="5">☆</button></div></section>
    <div class="submit-bar"><div class="submit-inner"><button id="submitBtn" class="btn" type="submit">Submit</button></div></div>
  </form>
  <div id="toast" class="toast"></div>
  <script>
    const starButtons = Array.from(document.querySelectorAll('.star'));
    const starInputs  = Array.from(document.querySelectorAll('input[name="stars"]'));
    function setStars(n){
      starButtons.forEach((b,i)=>{b.classList.toggle('filled', i < n);b.textContent = i < n ? '⭐' : '☆';});
      if(n>0){document.getElementById('stars-'+n).checked = true;}
    }
    starButtons.forEach(btn=>btn.addEventListener('click',()=>setStars(+btn.dataset.val)));
    setStars(0);

    const form = document.getElementById('assessmentForm');
    const submitBtn = document.getElementById('submitBtn');
    const toast = document.getElementById('toast');
    function showToast(msg){toast.textContent = msg;toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'), 2400);}
    function getFormData(form){
      const fd = new FormData(form);
      const data = Object.fromEntries(fd.entries());
      data.cryScale = data.cryScale ? Number(data.cryScale) : null;
      data.timestamp = new Date().toISOString();
      return data;
    }
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      if(!form.reportValidity()) return;
      submitBtn.disabled = true;submitBtn.textContent = 'Submitting…';
      const payload = getFormData(form);
      try{
        const resp = await fetch('/submit', {method: 'POST',headers: {'Content-Type':'application/json'},body: JSON.stringify(payload)});
        if(!resp.ok){await new Promise(r=>setTimeout(r, 800));}
        showToast('Form submitted successfully');
        console.log('Submitted payload:', payload);
        form.reset();
        setStars(0);
        document.getElementById('cryValue').textContent = '1';
      }catch(err){
        console.error(err);showToast('Submission failed. Please try again.');
      }finally{
        submitBtn.disabled = false;submitBtn.textContent = 'Submit';
      }
    });

    const cryRange = document.getElementById('cryRange');
    const cryValue = document.getElementById('cryValue');
    cryRange.addEventListener('input', ()=>{cryValue.textContent = cryRange.value;});
  </script>
</body>
</html>
